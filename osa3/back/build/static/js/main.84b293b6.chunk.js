(this["webpackJsonpreact-sovellus"]=this["webpackJsonpreact-sovellus"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),o=t.n(c),u=t(4),l=t(2),i=t(3),m=t.n(i),d="/api/persons",s=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];var r=e.apply(void 0,t);return r.then((function(e){return e.data}))},f=function(){return s(m.a.get,d)},h=function(e){return s(m.a.post,d,e)},b=function(e){return s(m.a.delete,"".concat(d,"/").concat(e))},g=function(e,n){return s(m.a.put,"".concat(d,"/").concat(e),n)},v=function(e){var n=e.name,t=e.number,a=e.handleNameChange,c=e.handleNumberChange,o=e.handleSubmit;return r.a.createElement("form",{onSubmit:o},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:t,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},p=function(e){var n=e.name,t=e.number,a=e.onHandleDelete;return r.a.createElement("div",null,"".concat(n,", ").concat(t," "),r.a.createElement("button",{id:n,onClick:a},"delete"))},E=function(e){var n=e.persons.filter((function(n){var t=n.name.toLowerCase(),a=e.filter.toLowerCase();return t.includes(a)}));return r.a.createElement("div",null,n.map((function(n){return r.a.createElement(p,{key:n.name,name:n.name,number:n.number,onHandleDelete:e.handleDelete})})))},j=function(e){var n=e.filter,t=e.handleFilterChange;return r.a.createElement("div",null,"Show names including ",r.a.createElement("input",{value:n,onChange:t}))},w=function(e){var n=e.message,t=e.errorMessage;return""!==t?r.a.createElement("div",{className:"error"},t):""===n?null:r.a.createElement("div",{className:"notification"},n)},O=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),m=i[0],d=i[1],s=Object(a.useState)(""),p=Object(l.a)(s,2),O=p[0],C=p[1],S=Object(a.useState)(""),D=Object(l.a)(S,2),y=D[0],N=D[1],k=Object(a.useState)(""),A=Object(l.a)(k,2),F=A[0],H=A[1],J=Object(a.useState)(""),L=Object(l.a)(J,2),M=L[0],T=L[1];Object(a.useEffect)((function(){f().then((function(e){console.log("Getting our top secret phone numbers"),c(e)}))}),[]);var x=function(e){H(e),setTimeout((function(){return H("")}),3e3)},B=function(e){console.error(e),T(e),setTimeout((function(){return T("")}),3e3)},G=function(e,n){console.log("changing",e);var a=Object(u.a)(Object(u.a)({},e),{},{number:n});g(a.id,a).then((function(e){c(t.map((function(n){return n.id===e.id?a:n}))),console.log("changed",e),x("Changed ".concat(e.name,"'s phone number"))})).catch((function(e){B(e.response.data.error)})).catch((function(){c(t.filter((function(e){return e.id!==a.id}))),B("".concat(a.name," was not in server database"))})),d(""),C("")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(w,{message:F,errorMessage:M}),r.a.createElement(j,{filter:y,handleFilterChange:function(e){return N(e.target.value)}}),r.a.createElement("h2",null,"Add a new item"),r.a.createElement(v,{name:m,handleNameChange:function(e){return d(e.target.value)},number:O,handleNumberChange:function(e){return C(e.target.value)},handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===m}));n?window.confirm("".concat(m," has already been added to phonebook.\nDo you want to update the old number with the new one?"))&&G(n,O):(console.log("adding number"),h({name:m,number:O}).then((function(e){d(""),C(""),c(t.concat(e)),console.log("added",e),x("Added ".concat(e.name))})).catch((function(e){B(e.response.data.error)})))}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(E,{persons:t,filter:y,handleDelete:function(e){e.preventDefault();var n=e.target.id;if(window.confirm("Delete ".concat(n,"?"))){var a=t.find((function(e){return n===e.name}));console.log("deleting",a.name),b(a.id).then((function(){c(t.filter((function(e){return e.id!==a.id}))),console.log("delete succesful",a),x("Deleted ".concat(a.name))}))}}}))};t(37);o.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.84b293b6.chunk.js.map