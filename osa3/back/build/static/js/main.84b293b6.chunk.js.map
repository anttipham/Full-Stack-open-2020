{"version":3,"sources":["services/persons.js","components/Input.js","components/PersonItem.js","components/Persons.js","components/Filter.js","components/Notification.js","components/App.js","index.js"],"names":["baseUrl","wrapper","f","args","request","then","response","data","axios","get","newObject","post","id","delete","put","Input","name","number","handleNameChange","handleNumberChange","handleSubmit","onSubmit","value","onChange","type","PersonItem","onHandleDelete","onClick","Persons","props","persons","filter","person","toLowerCase","includes","map","key","handleDelete","Filter","handleFilterChange","Notification","message","errorMessage","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","setMessage","setErrorMessage","useEffect","personsService","console","log","showMessage","msg","setTimeout","showErrorMessage","error","changeNumber","newPerson","checkPerson","catch","event","target","preventDefault","find","window","confirm","concat","deletePerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.84b293b6.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst wrapper = (f, ...args) => {\r\n  const request = f(...args)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst getAll = () => wrapper(axios.get, baseUrl)\r\n\r\nconst create = (newObject) => wrapper(axios.post, baseUrl, newObject)\r\n\r\nconst destroy = (id) => wrapper(axios.delete, `${baseUrl}/${id}`)\r\n\r\nconst update = (id, newObject) => wrapper(axios.put, `${baseUrl}/${id}`, newObject)\r\n\r\nexport default { getAll, create, destroy, update }\r\n","import React from 'react'\r\n\r\nconst Input = ({ name, number, handleNameChange, handleNumberChange, handleSubmit }) => {\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div>\r\n        name: <input value={name} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={number} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type='submit'>add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Input\r\n","import React from 'react'\r\n\r\nconst PersonItem = ({ name, number, onHandleDelete }) => (\r\n  <div>\r\n    {`${name}, ${number} `}\r\n    <button id={name} onClick={onHandleDelete}>delete</button>\r\n  </div>\r\n)\r\n\r\nexport default PersonItem\r\n","import React from 'react'\r\nimport PersonItem from './PersonItem'\r\n\r\nconst Persons = (props) => {\r\n  const persons = props.persons.filter(person => {\r\n    const name = person.name.toLowerCase()\r\n    const filter = props.filter.toLowerCase()\r\n    return name.includes(filter)\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      {persons.map(person => (\r\n        <PersonItem\r\n          key={person.name}\r\n          name={person.name}\r\n          number={person.number}\r\n          onHandleDelete={props.handleDelete}\r\n        />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons\r\n","import React from 'react'\r\n\r\nconst Filter = ({ filter, handleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      {'Show names including '}\r\n      <input\r\n        value={filter}\r\n        onChange={handleFilterChange}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst Notification = ({ message, errorMessage }) => {\r\n  if (errorMessage !== '') {\r\n    return (\r\n      <div className='error'>\r\n        {errorMessage}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (message === '') {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='notification'>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import React, { useState, useEffect } from 'react'\r\nimport personsService from '../services/persons'\r\nimport Input from './Input'\r\nimport Persons from './Persons'\r\nimport Filter from './Filter'\r\nimport Notification from './Notification'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [filter, setFilter] = useState('')\r\n  const [message, setMessage] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState('')\r\n\r\n  // Haetaan henkilöt muistista\r\n  useEffect(() => {\r\n    personsService.getAll().then(data => {\r\n      console.log('Getting our top secret phone numbers')\r\n      setPersons(data)\r\n    })\r\n  }, [])\r\n\r\n  const showMessage = (msg) => {\r\n    setMessage(msg)\r\n    setTimeout(() => setMessage(''), 3000)\r\n  }\r\n\r\n  const showErrorMessage = (msg) => {\r\n    console.error(msg)\r\n    setErrorMessage(msg)\r\n    setTimeout(() => setErrorMessage(''), 3000)\r\n  }\r\n\r\n  //\r\n  // Event handlers\r\n  //\r\n\r\n  const addNumber = (event) => {\r\n    event.preventDefault()\r\n    // Tarkista, onko jo lisätty.\r\n    const person = persons.find(person => person.name === newName)\r\n    if (person) {\r\n      if (window.confirm(`${newName} has already been added to phonebook.\\nDo you want to update the old number with the new one?`)) {\r\n        // Jos on lisätty, muokkaa numeroa\r\n        changeNumber(person, newNumber)\r\n      }\r\n      return\r\n    }\r\n\r\n    // Muuten lisää uusi henkilö\r\n    console.log('adding number')\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    personsService.create(newPerson)\r\n      .then((data) => {\r\n        setNewName('')\r\n        setNewNumber('')\r\n        setPersons(persons.concat(data))\r\n\r\n        console.log('added', data)\r\n        showMessage(`Added ${data.name}`)\r\n      })\r\n      .catch(error => {\r\n        // console.error(error.response)\r\n        showErrorMessage(error.response.data.error)\r\n      })\r\n  }\r\n\r\n  const changeNumber = (person, number) => {\r\n    console.log('changing', person)\r\n\r\n    const newPerson = { ...person, number }\r\n    personsService.update(newPerson.id, newPerson)\r\n      .then(data => {\r\n        setPersons(persons.map(checkPerson => checkPerson.id === data.id ? newPerson : checkPerson))\r\n\r\n        console.log('changed', data)\r\n        showMessage(`Changed ${data.name}'s phone number`)\r\n      })\r\n      .catch(error => {\r\n        // Validaatiovirhettä varten\r\n        showErrorMessage(error.response.data.error)\r\n      })\r\n      .catch(() => {\r\n        // Henkilö jo poistettu\r\n        setPersons(persons.filter((checkPerson) => checkPerson.id !== newPerson.id))\r\n        showErrorMessage(`${newPerson.name} was not in server database`)\r\n      })\r\n\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const deleteNumber = (event) => {\r\n    event.preventDefault()\r\n    const name = event.target.id\r\n    if (!window.confirm(`Delete ${name}?`)) {\r\n      return\r\n    }\r\n\r\n    // Get id\r\n    const deletePerson = persons.find(person => name === person.name)\r\n\r\n    console.log('deleting', deletePerson.name)\r\n    personsService.destroy(deletePerson.id)\r\n      .then(() => {\r\n        setPersons(persons.filter(person => person.id !== deletePerson.id))\r\n\r\n        console.log('delete succesful', deletePerson)\r\n        showMessage(`Deleted ${deletePerson.name}`)\r\n      })\r\n  }\r\n\r\n  const changeInputName = event => setNewName(event.target.value)\r\n  const changeInputNumber = event => setNewNumber(event.target.value)\r\n  const changeInputFilter = event => setFilter(event.target.value)\r\n\r\n  return (\r\n    <>\r\n      <h1>Phonebook</h1>\r\n      <Notification message={message} errorMessage={errorMessage} />\r\n\r\n      <Filter filter={filter} handleFilterChange={changeInputFilter} />\r\n\r\n      <h2>Add a new item</h2>\r\n      <Input\r\n        name={newName}\r\n        handleNameChange={changeInputName}\r\n        number={newNumber}\r\n        handleNumberChange={changeInputNumber}\r\n        handleSubmit={addNumber}\r\n      />\r\n\r\n      <h2>Numbers</h2>\r\n      <Persons persons={persons} filter={filter} handleDelete={deleteNumber} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}